{"version":3,"sources":["all.js","backEnd.js","frontEnd.js","swiper.js"],"names":["token_UID","api_path","validHeader","headers","BEbaseURL","ordersData","getOrderList","axios","get","then","res","data","orders","init_BE","err","console","log","message","renderOrderList","orderList","document","querySelector","str","forEach","item","productItems","products","map","el","title","join","id","user","name","tel","address","email","createdAt","paid","innerHTML","printCategoryPie","categoryData","chartSourceData","category","chartCategory","Object","keys","push","categoryRevenueChart","c3","generate","bindto","columns","type","colors","legend","show","printItemsPie","itemsData","chartItems","compareData","sort","item1","item2","arr1","slice","arr2","length","othersNum","newData","concat","itemsRevenueChart","editStatus","status","put","delOrder","endpoint","swal","text","icon","buttons","dangerMode","willDelete","clearAllOrders","FEbaseURL","productsData","cartData","getProducts","renderProducts","renderFilter","description","images","origin_price","price","productsList","catchCartBtn","options","Set","add","productsCategory","optionStr","Array","from","btn_intoCart","querySelectorAll","addEventListener","addCart","dataset","itemNum","carts","hasItem","filter","product","post","renderCart","cartList","quantity","totalPrice","finalTotal","toString","editQuantity","deleteCartItem","deleteAll","cartItem_quantity","num","parseInt","value","alert","patch","btn_deleteAll","getElementById","constraints","fname","presence","fphone","format","pattern","femail","faddress","sendOrder","sendReserveForm","reserveForm","reserveFormInputs","e","errors","validate","key","targetElement","msg","split","target","setAttribute","button","removeAttribute","init_FE","recommendTopSwiper","Swiper","slidesPerView","spaceBetween","recommendBottomSwiper"],"mappings":"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","file":"all.js","sourcesContent":["","// 驗證\r\nconst token_UID = \"t5fZx20LStfPtkitAn2xrbhylAC2\";\r\nconst api_path = \"sylviah\";\r\nconst validHeader = {\r\n  headers: {\r\n    'Authorization': `${token_UID}`\r\n  }\r\n}\r\n\r\n// baseurl\r\nconst BEbaseURL = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`;\r\n\r\n// 全域資料變數\r\nlet ordersData = [];\r\n\r\n\r\n// 取得訂單列表\r\nfunction getOrderList(){\r\n    axios.get(BEbaseURL, validHeader)\r\n    .then((res)=>{\r\n        // 將取得的資料賦予全域變數\r\n        ordersData = res.data.orders;\r\n\r\n        // 初始渲染\r\n        init_BE();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err.message);\r\n    });\r\n}\r\n\r\n\r\n// 渲染訂單列表\r\nfunction renderOrderList(){\r\n    const orderList = document.querySelector('.orderList');\r\n    let str = \"\";\r\n\r\n    ordersData.forEach(item => {\r\n        const productItems = item.products.map(el=>el.title).join(\"<br>\");\r\n\r\n        str += `\r\n        <tr>\r\n          <th scope=\"row\">\r\n            ${item.id}\r\n          </th>\r\n          <td>\r\n            ${item.user.name}<br>\r\n            ${item.user.tel}\r\n          </td>\r\n          <td>\r\n            ${item.user.address}\r\n          </td>\r\n          <td>\r\n            ${item.user.email}\r\n          </td>\r\n          <td>\r\n            ${productItems}\r\n          </td>\r\n          <td>\r\n            ${item.createdAt}\r\n          </td>\r\n          <td>\r\n              <p class=\"btn orderStatus link-info\" onclick=\"editStatus('${item.id}',${item.paid});\">\r\n                <u>${item.paid?'已處理':'未處理'}</u>\r\n              </p>\r\n          </td>\r\n          <td>\r\n            <button type=\"button\" class=\"btn btn-danger\" onclick=\"delOrder('${item.id}');\">刪除</button>\r\n          </td>\r\n        </tr>`;\r\n    });\r\n\r\n    orderList.innerHTML = str;\r\n\r\n}\r\n\r\n\r\n// 全產品類別營收比重：繪製 C3 圓餅圖\r\nfunction printCategoryPie(){\r\n    // 將 data 資料結構重組為 C3 要求的結構\r\n    const categoryData = [];\r\n    const chartSourceData = {};\r\n    ordersData.forEach(el => {\r\n        el.products.forEach(item => {\r\n            if(!chartSourceData[item.category]){\r\n                chartSourceData[item.category] = 1;\r\n            }else{\r\n                chartSourceData[item.category]+=1\r\n            }\r\n        });\r\n    });\r\n    \r\n    const chartCategory = Object.keys(chartSourceData);\r\n    chartCategory.forEach(category => categoryData.push([category, chartSourceData[category]]));\r\n    \r\n    //繪製圓餅圖\r\n    const categoryRevenueChart = c3.generate({\r\n      bindto: '#categoryRevenueChart',\r\n      data: {\r\n        columns: categoryData,\r\n        type : 'pie',\r\n        colors: {\r\n        \"窗簾\": '#F3A712',\r\n        \"床架\": '#534D41',\r\n        \"收納\": '#F0CEA0'\r\n        }\r\n      },\r\n      legend: {\r\n        show: true //是否顯示項目\r\n      }\r\n    });\r\n\r\n}\r\n\r\n\r\n// 全品項營收比重：繪製 C3 圓餅圖\r\nfunction printItemsPie(){\r\n  // 將 data 資料結構重組為 C3 要求的結構\r\n  const itemsData = [];\r\n  const chartSourceData = {};\r\n  ordersData.forEach(el => {\r\n      el.products.forEach(item => {\r\n          if(!chartSourceData[item.title]){\r\n              chartSourceData[item.title] = 1;\r\n          }else{\r\n              chartSourceData[item.title]+=1\r\n          }\r\n      });\r\n  });\r\n  \r\n  const chartItems = Object.keys(chartSourceData);\r\n  chartItems.forEach(item => itemsData.push([item, chartSourceData[item]]));\r\n\r\n  // 各品項的數量比大小，選出前三項，剩下的列為其他\r\n  let compareData = itemsData.sort((item1, item2) => {\r\n    return item2[1] - item1[1]\r\n  });\r\n  let arr1 = compareData.slice(0,3);\r\n  let arr2 = compareData.slice(3, compareData.length);\r\n  let othersNum = 0;\r\n  arr2.forEach(el => othersNum += el[1]);\r\n  let newData = arr1.concat([[\"其他\", othersNum]]);\r\n  \r\n  //繪製圓餅圖\r\n  const itemsRevenueChart = c3.generate({\r\n    bindto: '#itemsRevenueChart',\r\n    data: {\r\n      columns: newData,\r\n      type : 'pie',\r\n      colors: {\r\n        \"Antony 遮光窗簾\": '#6B6054',\r\n        \"Charles 雙人床架\": '#546A76',\r\n        \"Antony 床邊桌\": '#88A0A8',\r\n        \"Louvre 單人床架\": '#929487',\r\n        \"Jordan 雙人床架／雙人加大\": '#B4CEB3',\r\n        \"Charles 系列儲物組合\": '#EFDD8D',\r\n        \"其他\": '#EFDD8D'\r\n      }\r\n    },\r\n    legend: {\r\n      show: true //是否顯示項目\r\n    }\r\n  });\r\n\r\n}\r\n\r\n\r\n// 修改訂單已處理/未處理狀態\r\nfunction editStatus(id, status){\r\n\r\n  // 本來想用三元運算來代入 status\r\n  // 使程式碼簡潔地結束\r\n  // status?false:true;\r\n  // 但不知為何用樣板字面值會導致型別錯誤，以致最後重複了兩次類似的 code\r\n\r\n  if(status){\r\n    axios.put(BEbaseURL,{\r\n      \"data\": {\r\n        \"id\": `${id}`,\r\n        \"paid\": false\r\n      }\r\n    },validHeader)\r\n    .then((res)=>{\r\n        console.log(res.data.orders);\r\n        ordersData = res.data.orders;\r\n        // 重新渲染畫面\r\n        renderOrderList(ordersData);\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err.message);\r\n    });\r\n  } else {\r\n    axios.put(BEbaseURL,{\r\n      \"data\": {\r\n        \"id\": `${id}`,\r\n        \"paid\": true\r\n      }\r\n    },validHeader)\r\n    .then((res)=>{\r\n        console.log(res.data.orders);\r\n        ordersData = res.data.orders;\r\n        // 重新渲染畫面\r\n        renderOrderList(ordersData);\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err.message);\r\n    });\r\n  }\r\n  \r\n}\r\n\r\n\r\n// 刪除特定單筆訂單\r\nfunction delOrder(id){\r\n  const endpoint = `${BEbaseURL}/${id}`\r\n\r\n  // 使用 sweetalert 進行確認\r\n  swal({\r\n    title:\"確定刪除此筆訂單嗎？\",\r\n    text: \"按下確定後資料會永久刪除\",\r\n    icon: \"warning\",\r\n    buttons: true,\r\n    dangerMode: true,\r\n  })\r\n  .then((willDelete) => {\r\n    if (willDelete) {\r\n      //使用者按下「確定」後執行刪除資料\r\n      axios.delete(endpoint,validHeader)\r\n      .then((res)=>{\r\n          console.log(res.data.orders);\r\n          ordersData = res.data.orders;\r\n          // 重新渲染畫面\r\n          init_BE();\r\n      })\r\n      .catch((err)=>{\r\n          console.log(err.message);\r\n      });\r\n      //刪除資料後跳出成功刪除視窗\r\n      swal(\"刪除完成!\", \"此筆訂單已刪除\", {\r\n        icon: \"success\",\r\n      });\r\n    } else {\r\n      //使用者按下「取消」跳出視窗\r\n      swal(\"訂單未被刪除\");\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// 清除所有訂單\r\nfunction clearAllOrders(){\r\n  // 使用 sweetalert 進行確認\r\n  swal({\r\n    title:\"確定刪除全部訂單嗎？\",\r\n    text: \"按下確定後資料會永久刪除\",\r\n    icon: \"warning\",\r\n    buttons: true,\r\n    dangerMode: true,\r\n  })\r\n  .then((willDelete) => {\r\n    if (willDelete) {\r\n      //使用者按下「確定」後執行刪除資料\r\n      axios.delete(BEbaseURL,validHeader)\r\n      .then((res)=>{\r\n          console.log(res.data.orders);\r\n          ordersData = res.data.orders;\r\n          // 重新渲染畫面\r\n          init_BE();\r\n      })\r\n      .catch((err)=>{\r\n          console.log(err.message);\r\n      });\r\n      //刪除資料後跳出成功刪除視窗\r\n      swal(\"刪除完成!\", \"訂單已經全部刪除\", {\r\n        icon: \"success\",\r\n      });\r\n    } else {\r\n      //使用者按下「取消」跳出視窗\r\n      swal(\"訂單未被刪除\");\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// 後台：重新渲染畫面\r\nfunction init_BE(){\r\n  renderOrderList();\r\n  printCategoryPie();\r\n  printItemsPie();\r\n}\r\n","// 驗證\r\nconst token_UID = \"t5fZx20LStfPtkitAn2xrbhylAC2\";\r\nconst api_path = \"sylviah\";\r\n\r\n// baseurl\r\nconst FEbaseURL = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}`;\r\n\r\n// 全域資料變數\r\nlet productsData = [];\r\nlet cartData = [];\r\n\r\n\r\n// 取得產品列表\r\nfunction getProducts(){\r\n    const endpoint = `${FEbaseURL}/products`;\r\n    \r\n    axios.get(endpoint)\r\n    .then((res)=>{\r\n        // 將取得的資料賦予全域變數\r\n        productsData = res.data.products;\r\n\r\n        // 初始渲染\r\n        renderProducts(productsData);\r\n        renderFilter();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    });\r\n}\r\n\r\n\r\n// 渲染產品列表 & 產品篩選器\r\nfunction renderProducts(data){\r\n    let str = \"\";\r\n    data.forEach(item => {\r\n        str += `\r\n        <div data-category=\"${item.category}\" class=\"col-6 col-md-4 col-lg-3 mb-7\">\r\n          <div class=\"card rounded-0 mb-2\">\r\n            <div class=\"productImg\" data-text=\"${item.description}\">\r\n              <img class=\"w-100 h-100 img-cover\" src=\"${item.images}\" alt=\"${item.title}\">\r\n            </div>\r\n            <span class=\"bg-black text-white py-2 px-6\">新品</span>\r\n            <div data-id=\"${item.id}\" class=\"btn_intoCart btn rounded-0 bg-black py-3\">\r\n              <p class=\"fz-5 text-white\">放入購物車</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-start\">\r\n            <p class=\"product_name fz-5 mb-2\">\r\n                ${item.title}\r\n            </p>\r\n            <p class=\"product_oriPrice text-decoration-line-through\">\r\n                ${item.origin_price}\r\n            </p>\r\n            <p class=\"product_Price fz-6\">\r\n                ${item.price}\r\n            </p>\r\n          </div>\r\n        </div>`\r\n    });\r\n\r\n    const productsList = document.querySelector('.productsList');\r\n    productsList.innerHTML = str;\r\n\r\n    // 取得所有\"加入購物車\"按鈕\r\n    catchCartBtn();\r\n}\r\n\r\n\r\n// 渲染產品篩選器 productsCategory 裡面的選項\r\nfunction renderFilter(){\r\n    let options = new Set();\r\n    productsData.forEach(item => {\r\n        options.add(item.category);\r\n    });\r\n    const productsCategory = document.querySelector('.productsCategory');\r\n    let optionStr = \"<option selected>全部</option>\";\r\n    Array.from(options).forEach(item=>{\r\n        optionStr += `<option value=\"${item}\">${item}</option>`;\r\n    });\r\n    productsCategory.innerHTML = optionStr;\r\n}\r\n\r\n\r\n// 取得\"加入購物車\"按鈕 & 設置監聽\r\nfunction catchCartBtn(){\r\n    const btn_intoCart = Array.from(document.querySelectorAll('.btn_intoCart'));\r\n    btn_intoCart.forEach(item => {\r\n        item.addEventListener('click',()=>{\r\n            addCart(item.dataset.id);\r\n        });\r\n    });\r\n}\r\n\r\n\r\n// 放入購物車\r\nfunction addCart(id){\r\n    const endpoint = `${FEbaseURL}/carts`;\r\n    let itemNum = 1;\r\n\r\n    // 確認購物車中是否已有相同品項\r\n    if(cartData.carts.length){\r\n        let hasItem = cartData.carts.filter(item => item.product.id === id);\r\n        if(hasItem){\r\n            itemNum += 1;\r\n        }\r\n\r\n    }\r\n\r\n    axios.post(endpoint, {\r\n        \"data\": {\r\n          \"productId\": `${id}`,\r\n          \"quantity\": itemNum\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        renderCart();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    });\r\n}\r\n\r\n\r\n// 渲染購物車列表\r\nfunction renderCart(){\r\n    const endpoint = `${FEbaseURL}/carts`;\r\n\r\n    axios.get(endpoint)\r\n    .then((res)=>{\r\n        // 將取得的資料賦予全域變數\r\n        cartData = res.data;\r\n        const cartList = document.querySelector('.cartList');\r\n        let str = \"\";\r\n        cartData.carts.forEach(item => {\r\n            str += `\r\n            <tr>\r\n              <th class=\"d-flex ai-c\" scope=\"row\">\r\n                <div class=\"cartImg me-4\">\r\n                    <img class=\"w-100 h-100 img-cover\" src=\"${item.product.images}\" alt=\"cart-product\">\r\n                </div>\r\n                <p>${item.product.title}</p>\r\n              </th>\r\n              <td>\r\n                ${item.product.origin_price}\r\n              </td>\r\n              <td>\r\n                <input data-id=\"${item.id}\" class=\"cartItem_quantity form-control\" type=\"number\" value=\"${item.quantity}\">\r\n              </td>\r\n              <td>\r\n                ${item.product.price}\r\n              </td>\r\n              <td>\r\n                <span data-id=\"${item.id}\" class=\"deleteCartItem material-icons fw-bold\">\r\n                  clear\r\n                </span>\r\n              </td>\r\n            </tr>`;\r\n        });\r\n\r\n        // 將最終金額加上千位數符號\r\n        let totalPrice = \"\";\r\n        // splice 方法不知為何失效，只好先用土法煉鋼\r\n        // const totalPrice = data.finalTotal;\r\n        // let num = totalPrice.toString().split('');\r\n        // console.log(num.splice(-3, 3, \",\").join(''));\r\n        totalPrice += cartData.finalTotal.toString().slice(0,-3);\r\n        totalPrice += ',';\r\n        totalPrice += cartData.finalTotal.toString().slice(-3);\r\n\r\n        // 最後一列加上總金額\r\n        str += `\r\n        <tr class=\"border-light\">\r\n            <th scope=\"row\">\r\n            <div id=\"btn_deleteAll\" class=\"btn btn-light fw-bold my-4\">\r\n                刪除所有品項\r\n            </div>\r\n            </th>\r\n            <td>\r\n            </td>\r\n            <td>\r\n            </td>\r\n            <td class=\"fw-bold\">\r\n            總金額\r\n            </td>\r\n            <td class=\"fz-5 fz-md-6\">\r\n            NT$${totalPrice}\r\n            </td>\r\n        </tr>`;\r\n\r\n        cartList.innerHTML = str;\r\n\r\n        // 加上修改品項數量功能\r\n        editQuantity();\r\n\r\n        // 加上刪除特定品項功能\r\n        deleteCartItem();\r\n\r\n        // 加上刪除所有品項功能\r\n        deleteAll();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    });\r\n}\r\n\r\n\r\n// 修改特定品項數量\r\nfunction editQuantity(){\r\n    const cartItem_quantity = Array.from(document.querySelectorAll('.cartItem_quantity'));\r\n    cartItem_quantity.forEach(el => {\r\n        el.addEventListener('change',() => {\r\n            const id = el.dataset.id;\r\n            const num = parseInt(el.value);\r\n            console.log(num);\r\n\r\n            if(num<=0){\r\n                alert('如果不想要這件商品，請直接按刪除喔，謝謝您！');\r\n                return;\r\n            }\r\n\r\n            const endpoint = `${FEbaseURL}/carts`;\r\n\r\n            axios.patch(endpoint, {\r\n                \"data\": {\r\n                  \"id\": id,\r\n                  \"quantity\": num\r\n                }\r\n            })\r\n            .then((res)=>{\r\n                console.log(res);\r\n                renderCart();\r\n            })\r\n            .catch((err)=>{\r\n                console.log(err);\r\n            });\r\n        });\r\n    });\r\n    \r\n}\r\n\r\n\r\n// 刪除購物車特定品項\r\nfunction deleteCartItem(){\r\n    const deleteCartItem = Array.from(document.querySelectorAll('.deleteCartItem'));\r\n    deleteCartItem.forEach(item => {\r\n        item.addEventListener('click',()=>{\r\n\r\n            const endpoint = `${FEbaseURL}/carts/${item.dataset.id}`;\r\n\r\n            axios.delete(endpoint)\r\n            .then((res)=>{\r\n                renderCart();\r\n            })\r\n            .catch((err)=>{\r\n                console.log(err);\r\n            })\r\n        });\r\n    });\r\n\r\n}\r\n\r\n\r\n// 刪除購物車所有品項\r\nfunction deleteAll(){\r\n    const btn_deleteAll = document.getElementById('btn_deleteAll');\r\n    btn_deleteAll.addEventListener('click',()=>{\r\n\r\n        const endpoint = `${FEbaseURL}/carts`;\r\n    \r\n        axios.delete(endpoint)\r\n        .then((res)=>{\r\n            console.log(res);\r\n            renderCart();\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    });\r\n}\r\n\r\n\r\n// 表單驗證：約束條件設定\r\nlet constraints = {\r\n  fname: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    }\r\n  },\r\n  fphone: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    },\r\n    format: {\r\n      pattern: \"[0-9]+\",\r\n      message: \"/請填入正確的電話或手機號碼格式。\"\r\n    }\r\n  },\r\n  femail: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    },\r\n    email: {\r\n      message: \"/請填入正確的 email 格式。\"\r\n    }\r\n  },\r\n  faddress: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    }\r\n  }\r\n};\r\n\r\n\r\n// 送出訂單\r\nfunction sendOrder(){\r\n    const sendReserveForm = document.getElementById('sendOrder');\r\n    const reserveForm = document.querySelector('.reserveForm');\r\n    const reserveFormInputs = Array.from(document.querySelectorAll('.reserveForm input, .reserveForm select'));\r\n\r\n    // 監聽：送出訂單按鈕\r\n    sendReserveForm.addEventListener('click',(e)=>{\r\n\r\n      // 表單驗證\r\n      let errors = validate(reserveForm, constraints);\r\n      if(errors){\r\n        console.log(errors);\r\n        Object.keys(errors).forEach(key=>{\r\n          const targetElement = document.getElementById(key);\r\n          const msg = errors[key][0].split('/')[1];\r\n          targetElement.innerHTML = msg;\r\n        });\r\n        return;\r\n      }\r\n\r\n      // 若購物車是空的，不送出訂單\r\n      if(cartData.carts.length===0) {\r\n        alert('再多逛一下，把喜歡的品項放進購物車喔！');\r\n        return;\r\n      }\r\n\r\n      // 防呆\r\n      e.target.setAttribute(\"disabled\", \"\");\r\n\r\n      // 驗證通過，送出訂單\r\n      const endpoint = `${FEbaseURL}/orders`;\r\n      axios.post(endpoint,{\r\n          \"data\": {\r\n            \"user\": {\r\n              \"name\": reserveFormInputs[0].value,\r\n              \"tel\": reserveFormInputs[1].value,\r\n              \"email\": reserveFormInputs[2].value,\r\n              \"address\": reserveFormInputs[3].value,\r\n              \"payment\": reserveFormInputs[4].value\r\n            }\r\n          }\r\n        })\r\n      .then((res)=>{\r\n          console.log(res);\r\n\r\n          // 成功送出訂單，sweetalert 跳出成功訊息\r\n          swal({\r\n            title: \"成功！\",\r\n            text: \"已收到您的訂單，請耐心等候到貨。\",\r\n            icon: \"success\",\r\n            button: \"OK\",\r\n          });\r\n\r\n          // 清空表單資料 & 重新渲染購物車列表\r\n          reserveFormInputs.forEach(item => item.value = '');\r\n          renderCart();\r\n\r\n          // 防呆解除\r\n          e.target.removeAttribute(\"disabled\");\r\n      })\r\n      .catch((err)=>{\r\n          console.log(err);\r\n      });\r\n\r\n    });\r\n}\r\n\r\n\r\n// 前台：初始渲染\r\nfunction init_FE(){\r\n  // 取得產品列表\r\n  getProducts();\r\n  // 渲染購物車列表\r\n  renderCart();\r\n  // 監聽送出訂單資料按鈕\r\n  sendOrder();\r\n  // 監聽產品篩選器：過濾產品列表\r\n  const productsCategory = document.querySelector('.productsCategory');\r\n  productsCategory.addEventListener('change',(e) => {\r\n    if(e.target.value === '全部'){\r\n      renderProducts(productsData);\r\n      return;\r\n    }\r\n    const data = productsData.filter(item => item.category === e.target.value);\r\n    renderProducts(data);\r\n  });\r\n}\r\n","// 首頁 - 好評推薦-上層\r\nconst recommendTopSwiper = new Swiper ('.recommendTopSwiper', {\r\n    slidesPerView: 2.57,\r\n    spaceBetween: 30,\r\n});\r\n\r\n// 首頁 - 好評推薦-下層\r\nconst recommendBottomSwiper = new Swiper ('.recommendBottomSwiper', {\r\n    slidesPerView: 2.8,\r\n    spaceBetween: 30,\r\n});\r\n"]}