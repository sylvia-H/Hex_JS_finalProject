{"version":3,"sources":["all.js","backEnd.js","frontEnd.js","swiper.js"],"names":["token_UID","api_path","validHeader","headers","BEbaseURL","ordersData","getOrderList","axios","get","then","res","data","orders","init_BE","err","console","log","message","renderOrderList","orderList","document","querySelector","str","forEach","item","productItems","products","map","el","title","join","id","user","name","tel","address","email","transferDate","createdAt","paid","innerHTML","dateNum","orderDate","Date","year","getFullYear","month","getMonth","date","getDate","hours","getHours","minutes","getMinutes","printCategoryPie","categoryData","chartSourceData","category","chartCategory","Object","keys","push","categoryRevenueChart","c3","generate","bindto","columns","type","colors","legend","show","printItemsPie","itemsData","chartItems","compareData","sort","item1","item2","arr1","slice","arr2","length","othersNum","newData","concat","itemsRevenueChart","editStatus","status","put","delOrder","endpoint","swal","text","icon","buttons","dangerMode","willDelete","clearAllOrders","FEbaseURL","productsData","cartData","getProducts","renderProducts","renderFilter","description","images","origin_price","price","productsList","catchCartBtn","options","Set","add","productsCategory","optionStr","Array","from","btn_intoCart","querySelectorAll","addEventListener","addCart","dataset","itemNum","carts","hasItem","filter","product","quantity","post","renderCart","cartSection","reserveSection","getElementById","classList","remove","cartList","totalPrice","toTenPercentile","finalTotal","editQuantity","deleteCartItem","deleteAll","num","parts","toString","split","replace","cartItem_quantity","parseInt","value","alert","patch","btn_deleteAll","constraints","fname","presence","fphone","format","pattern","femail","faddress","sendOrder","sendReserveForm","reserveForm","reserveFormInputs","warningMsg","e","errors","validate","key","targetElement","msg","target","setAttribute","button","removeAttribute","init_FE","recommendTopSwiper","Swiper","slidesPerView","spaceBetween","recommendBottomSwiper"],"mappings":"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","file":"all.js","sourcesContent":["","// 驗證\r\nconst token_UID = \"t5fZx20LStfPtkitAn2xrbhylAC2\";\r\nconst api_path = \"sylviah\";\r\nconst validHeader = {\r\n  headers: {\r\n    'Authorization': `${token_UID}`\r\n  }\r\n}\r\n\r\n// baseurl\r\nconst BEbaseURL = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`;\r\n\r\n// 全域資料變數\r\nlet ordersData = [];\r\n\r\n\r\n// 取得訂單列表\r\nfunction getOrderList(){\r\n    axios.get(BEbaseURL, validHeader)\r\n    .then((res)=>{\r\n        // 將取得的資料賦予全域變數\r\n        ordersData = res.data.orders;\r\n\r\n        // 初始渲染\r\n        init_BE();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err.message);\r\n    });\r\n}\r\n\r\n\r\n// 渲染訂單列表\r\nfunction renderOrderList(){\r\n    const orderList = document.querySelector('.orderList');\r\n    let str = \"\";\r\n\r\n    ordersData.forEach(item => {\r\n        const productItems = item.products.map(el=>el.title).join(\"<br>\");\r\n\r\n        str += `\r\n        <tr>\r\n          <th scope=\"row\">\r\n            ${item.id}\r\n          </th>\r\n          <td>\r\n            ${item.user.name}<br>\r\n            ${item.user.tel}\r\n          </td>\r\n          <td>\r\n            ${item.user.address}\r\n          </td>\r\n          <td>\r\n            ${item.user.email}\r\n          </td>\r\n          <td>\r\n            ${productItems}\r\n          </td>\r\n          <td>\r\n            ${transferDate(item.createdAt*1000)}\r\n          </td>\r\n          <td>\r\n              <p class=\"btn orderStatus link-info\" onclick=\"editStatus('${item.id}',${item.paid});\">\r\n                <u>${item.paid?'已處理':'未處理'}</u>\r\n              </p>\r\n          </td>\r\n          <td>\r\n            <button type=\"button\" class=\"btn btn-danger\" onclick=\"delOrder('${item.id}');\">刪除</button>\r\n          </td>\r\n        </tr>`;\r\n    });\r\n\r\n    orderList.innerHTML = str;\r\n\r\n}\r\n\r\n// 訂單日期轉換\r\nfunction transferDate(dateNum){\r\n  let str = \"\";\r\n  const orderDate = new Date(dateNum);\r\n  const year = orderDate.getFullYear();\r\n  const month = orderDate.getMonth() + 1;\r\n  const date = orderDate.getDate();\r\n  const hours = orderDate.getHours();\r\n  const minutes = orderDate.getMinutes();\r\n  str = `${year}/${month}/${date}<br>${hours}:${minutes}`;\r\n  return str;\r\n}\r\n\r\n\r\n// 全產品類別營收比重：繪製 C3 圓餅圖\r\nfunction printCategoryPie(){\r\n    // 將 data 資料結構重組為 C3 要求的結構\r\n    const categoryData = [];\r\n    const chartSourceData = {};\r\n    ordersData.forEach(el => {\r\n        el.products.forEach(item => {\r\n            if(!chartSourceData[item.category]){\r\n                chartSourceData[item.category] = 1;\r\n            }else{\r\n                chartSourceData[item.category]+=1\r\n            }\r\n        });\r\n    });\r\n    \r\n    const chartCategory = Object.keys(chartSourceData);\r\n    chartCategory.forEach(category => categoryData.push([category, chartSourceData[category]]));\r\n    \r\n    //繪製圓餅圖\r\n    const categoryRevenueChart = c3.generate({\r\n      bindto: '#categoryRevenueChart',\r\n      data: {\r\n        columns: categoryData,\r\n        type : 'pie',\r\n        colors: {\r\n        \"窗簾\": '#F3A712',\r\n        \"床架\": '#534D41',\r\n        \"收納\": '#F0CEA0'\r\n        }\r\n      },\r\n      legend: {\r\n        show: true //是否顯示項目\r\n      }\r\n    });\r\n\r\n}\r\n\r\n\r\n// 全品項營收比重：繪製 C3 圓餅圖\r\nfunction printItemsPie(){\r\n  // 將 data 資料結構重組為 C3 要求的結構\r\n  const itemsData = [];\r\n  const chartSourceData = {};\r\n  ordersData.forEach(el => {\r\n      el.products.forEach(item => {\r\n          if(!chartSourceData[item.title]){\r\n              chartSourceData[item.title] = 1;\r\n          }else{\r\n              chartSourceData[item.title]+=1\r\n          }\r\n      });\r\n  });\r\n  \r\n  const chartItems = Object.keys(chartSourceData);\r\n  chartItems.forEach(item => itemsData.push([item, chartSourceData[item]]));\r\n\r\n  // 各品項的數量比大小，選出前三項，剩下的列為其他\r\n  let compareData = itemsData.sort((item1, item2) => {\r\n    return item2[1] - item1[1]\r\n  });\r\n  let arr1 = compareData.slice(0,3);\r\n  let arr2 = compareData.slice(3, compareData.length);\r\n  let othersNum = 0;\r\n  arr2.forEach(el => othersNum += el[1]);\r\n  let newData = arr1.concat([[\"其他\", othersNum]]);\r\n  \r\n  //繪製圓餅圖\r\n  const itemsRevenueChart = c3.generate({\r\n    bindto: '#itemsRevenueChart',\r\n    data: {\r\n      columns: newData,\r\n      type : 'pie',\r\n      colors: {\r\n        \"Antony 遮光窗簾\": '#6B6054',\r\n        \"Charles 雙人床架\": '#546A76',\r\n        \"Antony 床邊桌\": '#88A0A8',\r\n        \"Louvre 單人床架\": '#929487',\r\n        \"Louvre 雙人床架／雙人加大\": '#B4CEB3',\r\n        \"Antony 雙人床架／雙人加大\": '#A85751',\r\n        \"Jordan 雙人床架／雙人加大\": '#C4F5FC',\r\n        \"Charles 系列儲物組合\": '#D57A66',\r\n        \"其他\": '#EFDD8D'\r\n      }\r\n    },\r\n    legend: {\r\n      show: true //是否顯示項目\r\n    }\r\n  });\r\n\r\n}\r\n\r\n\r\n// 修改訂單已處理/未處理狀態\r\nfunction editStatus(id, status){\r\n\r\n  // 本來想用三元運算來代入 status\r\n  // 使程式碼簡潔地結束\r\n  // status?false:true;\r\n  // 但不知為何用樣板字面值會導致型別錯誤，以致最後重複了兩次類似的 code\r\n\r\n  if(status){\r\n    axios.put(BEbaseURL,{\r\n      \"data\": {\r\n        \"id\": `${id}`,\r\n        \"paid\": false\r\n      }\r\n    },validHeader)\r\n    .then((res)=>{\r\n        ordersData = res.data.orders;\r\n        // 重新渲染畫面\r\n        renderOrderList(ordersData);\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err.message);\r\n    });\r\n  } else {\r\n    axios.put(BEbaseURL,{\r\n      \"data\": {\r\n        \"id\": `${id}`,\r\n        \"paid\": true\r\n      }\r\n    },validHeader)\r\n    .then((res)=>{\r\n        ordersData = res.data.orders;\r\n        // 重新渲染畫面\r\n        renderOrderList(ordersData);\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err.message);\r\n    });\r\n  }\r\n  \r\n}\r\n\r\n\r\n// 刪除特定單筆訂單\r\nfunction delOrder(id){\r\n  const endpoint = `${BEbaseURL}/${id}`\r\n\r\n  // 使用 sweetalert 進行確認\r\n  swal({\r\n    title:\"確定刪除此筆訂單嗎？\",\r\n    text: \"按下確定後資料會永久刪除\",\r\n    icon: \"warning\",\r\n    buttons: true,\r\n    dangerMode: true,\r\n  })\r\n  .then((willDelete) => {\r\n    if (willDelete) {\r\n      //使用者按下「確定」後執行刪除資料\r\n      axios.delete(endpoint,validHeader)\r\n      .then((res)=>{\r\n          ordersData = res.data.orders;\r\n          // 重新渲染畫面\r\n          init_BE();\r\n      })\r\n      .catch((err)=>{\r\n          console.log(err.message);\r\n      });\r\n      //刪除資料後跳出成功刪除視窗\r\n      swal(\"刪除完成!\", \"此筆訂單已刪除\", {\r\n        icon: \"success\",\r\n      });\r\n    } else {\r\n      //使用者按下「取消」跳出視窗\r\n      swal(\"訂單未被刪除\");\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// 清除所有訂單\r\nfunction clearAllOrders(){\r\n  // 使用 sweetalert 進行確認\r\n  swal({\r\n    title:\"確定刪除全部訂單嗎？\",\r\n    text: \"按下確定後資料會永久刪除\",\r\n    icon: \"warning\",\r\n    buttons: true,\r\n    dangerMode: true,\r\n  })\r\n  .then((willDelete) => {\r\n    if (willDelete) {\r\n      //使用者按下「確定」後執行刪除資料\r\n      axios.delete(BEbaseURL,validHeader)\r\n      .then((res)=>{\r\n          ordersData = res.data.orders;\r\n          // 重新渲染畫面\r\n          init_BE();\r\n      })\r\n      .catch((err)=>{\r\n          console.log(err.message);\r\n      });\r\n      //刪除資料後跳出成功刪除視窗\r\n      swal(\"刪除完成!\", \"訂單已經全部刪除\", {\r\n        icon: \"success\",\r\n      });\r\n    } else {\r\n      //使用者按下「取消」跳出視窗\r\n      swal(\"訂單未被刪除\");\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// 後台：重新渲染畫面\r\nfunction init_BE(){\r\n  renderOrderList();\r\n  printCategoryPie();\r\n  printItemsPie();\r\n}\r\n","// 驗證\r\nconst token_UID = \"t5fZx20LStfPtkitAn2xrbhylAC2\";\r\nconst api_path = \"sylviah\";\r\n\r\n// baseurl\r\nconst FEbaseURL = `https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}`;\r\n\r\n// 全域資料變數\r\nlet productsData = [];\r\nlet cartData = [];\r\n\r\n\r\n// 取得產品列表\r\nfunction getProducts(){\r\n    const endpoint = `${FEbaseURL}/products`;\r\n    \r\n    axios.get(endpoint)\r\n    .then((res)=>{\r\n        // 將取得的資料賦予全域變數\r\n        productsData = res.data.products;\r\n\r\n        // 初始渲染\r\n        renderProducts(productsData);\r\n        renderFilter();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    });\r\n}\r\n\r\n\r\n// 渲染產品列表 & 產品篩選器\r\nfunction renderProducts(data){\r\n    let str = \"\";\r\n    data.forEach(item => {\r\n        str += `\r\n        <div data-category=\"${item.category}\" class=\"col-6 col-md-4 col-lg-3 mb-7\">\r\n          <div class=\"card rounded-0 mb-2\">\r\n            <div class=\"productImg\" data-text=\"${item.description}\">\r\n              <img class=\"w-100 h-100 img-cover\" src=\"${item.images}\" alt=\"${item.title}\">\r\n            </div>\r\n            <span class=\"bg-black text-white py-2 px-6\">新品</span>\r\n            <div data-id=\"${item.id}\" class=\"btn_intoCart btn rounded-0 bg-black py-3\">\r\n              <p class=\"fz-5 text-white\">放入購物車</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-start\">\r\n            <p class=\"product_name fz-5 mb-2\">\r\n                ${item.title}\r\n            </p>\r\n            <p class=\"product_oriPrice text-decoration-line-through\">\r\n                ${item.origin_price}\r\n            </p>\r\n            <p class=\"product_Price fz-6\">\r\n                ${item.price}\r\n            </p>\r\n          </div>\r\n        </div>`\r\n    });\r\n\r\n    const productsList = document.querySelector('.productsList');\r\n    productsList.innerHTML = str;\r\n\r\n    // 取得所有\"加入購物車\"按鈕\r\n    catchCartBtn();\r\n}\r\n\r\n\r\n// 渲染產品篩選器 productsCategory 裡面的選項\r\nfunction renderFilter(){\r\n    let options = new Set();\r\n    productsData.forEach(item => {\r\n        options.add(item.category);\r\n    });\r\n    const productsCategory = document.querySelector('.productsCategory');\r\n    let optionStr = \"<option selected>全部</option>\";\r\n    Array.from(options).forEach(item=>{\r\n        optionStr += `<option value=\"${item}\">${item}</option>`;\r\n    });\r\n    productsCategory.innerHTML = optionStr;\r\n}\r\n\r\n\r\n// 取得\"加入購物車\"按鈕 & 設置監聽\r\nfunction catchCartBtn(){\r\n    const btn_intoCart = Array.from(document.querySelectorAll('.btn_intoCart'));\r\n    btn_intoCart.forEach(item => {\r\n        item.addEventListener('click',()=>{\r\n            addCart(item.dataset.id);\r\n        });\r\n    });\r\n}\r\n\r\n\r\n// 放入購物車\r\nfunction addCart(id){\r\n    const endpoint = `${FEbaseURL}/carts`;\r\n\r\n    // 預設放入 1 件商品\r\n    let itemNum = 1;\r\n\r\n    // 確認購物車中是否已有相同品項\r\n    if(cartData.carts.length){\r\n        let hasItem = [];\r\n        hasItem = cartData.carts.filter(item => item.product.id == id);\r\n        if(hasItem.length){\r\n          itemNum = hasItem[0].quantity + 1;\r\n        }\r\n    }\r\n\r\n    axios.post(endpoint, {\r\n        \"data\": {\r\n          \"productId\": `${id}`,\r\n          \"quantity\": itemNum\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        renderCart();\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    });\r\n}\r\n\r\n\r\n// 渲染購物車列表\r\nfunction renderCart(){\r\n  const cartSection = document.querySelector('.cart');\r\n  const reserveSection = document.getElementById('reserve');\r\n\r\n  const endpoint = `${FEbaseURL}/carts`;\r\n\r\n  axios.get(endpoint)\r\n  .then((res)=>{\r\n      // 將取得的資料賦予全域變數\r\n      cartData = res.data;\r\n\r\n      if(cartData.carts.length == 0){\r\n        cartSection.classList.add('d-none');\r\n        reserveSection.classList.add('d-none');\r\n      } else {\r\n        cartSection.classList.remove('d-none');\r\n        reserveSection.classList.remove('d-none');\r\n        const cartList = document.querySelector('.cartList');\r\n        let str = \"\";\r\n        cartData.carts.forEach(item => {\r\n            str += `\r\n            <tr>\r\n              <th class=\"d-flex ai-c\" scope=\"row\">\r\n                <div class=\"cartImg me-4\">\r\n                    <img class=\"w-100 h-100 img-cover\" src=\"${item.product.images}\" alt=\"cart-product\">\r\n                </div>\r\n                <p>${item.product.title}</p>\r\n              </th>\r\n              <td>\r\n                ${item.product.origin_price}\r\n              </td>\r\n              <td>\r\n                <input data-id=\"${item.id}\" class=\"cartItem_quantity form-control\" type=\"number\" value=\"${item.quantity}\">\r\n              </td>\r\n              <td>\r\n                ${item.product.price}\r\n              </td>\r\n              <td>\r\n                <span data-id=\"${item.id}\" class=\"deleteCartItem material-icons fw-bold\">\r\n                  clear\r\n                </span>\r\n              </td>\r\n            </tr>`;\r\n        });\r\n  \r\n        // 將最終金額加上千分位符號\r\n        let totalPrice = toTenPercentile(cartData.finalTotal);\r\n  \r\n        // 最後一列加上總金額\r\n        str += `\r\n        <tr class=\"border-light\">\r\n            <th scope=\"row\">\r\n            <div id=\"btn_deleteAll\" class=\"btn btn-light fw-bold my-4\">\r\n                刪除所有品項\r\n            </div>\r\n            </th>\r\n            <td>\r\n            </td>\r\n            <td class=\"fw-bold\">\r\n            總金額\r\n            </td>\r\n            <td colspan=\"2\" class=\"fz-5 fz-md-6\">\r\n            NT$${totalPrice}\r\n            </td>\r\n        </tr>`;\r\n  \r\n        cartList.innerHTML = str;\r\n  \r\n        // 加上修改品項數量功能\r\n        editQuantity();\r\n  \r\n        // 加上刪除特定品項功能\r\n        deleteCartItem();\r\n  \r\n        // 加上刪除所有品項功能\r\n        deleteAll();\r\n      }\r\n  })\r\n  .catch((err)=>{\r\n      console.log(err);\r\n  });\r\n}\r\n\r\n// 轉換千分位符號\r\nfunction toTenPercentile(num){\r\n  var parts = num.toString().split('.');\r\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n  return parts.join('.');\r\n}\r\n\r\n\r\n// 修改特定品項數量\r\nfunction editQuantity(){\r\n    const cartItem_quantity = Array.from(document.querySelectorAll('.cartItem_quantity'));\r\n    cartItem_quantity.forEach(el => {\r\n        el.addEventListener('change',() => {\r\n            const id = el.dataset.id;\r\n            const num = parseInt(el.value);\r\n\r\n            if(num<=0){\r\n                alert('如果不想要這件商品，請直接按刪除喔，謝謝您！');\r\n                return;\r\n            }\r\n\r\n            const endpoint = `${FEbaseURL}/carts`;\r\n\r\n            axios.patch(endpoint, {\r\n                \"data\": {\r\n                  \"id\": id,\r\n                  \"quantity\": num\r\n                }\r\n            })\r\n            .then((res)=>{\r\n                console.log(res);\r\n                renderCart();\r\n            })\r\n            .catch((err)=>{\r\n                console.log(err);\r\n            });\r\n        });\r\n    });\r\n    \r\n}\r\n\r\n\r\n// 刪除購物車特定品項\r\nfunction deleteCartItem(){\r\n    const deleteCartItem = Array.from(document.querySelectorAll('.deleteCartItem'));\r\n    deleteCartItem.forEach(item => {\r\n        item.addEventListener('click',()=>{\r\n\r\n            const endpoint = `${FEbaseURL}/carts/${item.dataset.id}`;\r\n\r\n            axios.delete(endpoint)\r\n            .then((res)=>{\r\n                renderCart();\r\n            })\r\n            .catch((err)=>{\r\n                console.log(err);\r\n            })\r\n        });\r\n    });\r\n\r\n}\r\n\r\n\r\n// 刪除購物車所有品項\r\nfunction deleteAll(){\r\n    const btn_deleteAll = document.getElementById('btn_deleteAll');\r\n    btn_deleteAll.addEventListener('click',()=>{\r\n\r\n        const endpoint = `${FEbaseURL}/carts`;\r\n    \r\n        axios.delete(endpoint)\r\n        .then((res)=>{\r\n            console.log(res);\r\n            renderCart();\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    });\r\n}\r\n\r\n\r\n// 表單驗證：約束條件設定\r\nlet constraints = {\r\n  fname: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    }\r\n  },\r\n  fphone: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    },\r\n    format: {\r\n      // 開頭必須是 + （國碼）或 0（區碼），後接至少 7 碼數字\r\n      pattern: /(\\++|[0]+)\\d{7,}/,\r\n      message: \"/請填入正確的電話或手機號碼格式。\"\r\n    }\r\n  },\r\n  femail: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    },\r\n    email: {\r\n      message: \"/請填入正確的 email 格式。\"\r\n    }\r\n  },\r\n  faddress: {\r\n    presence: {\r\n      message: \"/必填！\"\r\n    }\r\n  }\r\n};\r\n\r\n\r\n// 送出訂單\r\nfunction sendOrder(){\r\n    const sendReserveForm = document.getElementById('sendOrder');\r\n    const reserveForm = document.querySelector('.reserveForm');\r\n    const reserveFormInputs = Array.from(document.querySelectorAll('.reserveForm input, .reserveForm select'));\r\n    const fname = document.getElementById('fname');\r\n    const fphone = document.getElementById('fphone');\r\n    const femail = document.getElementById('femail');\r\n    const faddress = document.getElementById('faddress');\r\n    const warningMsg = [fname, fphone, femail, faddress];\r\n\r\n    // 監聽：送出訂單按鈕\r\n    sendReserveForm.addEventListener('click',(e)=>{\r\n      \r\n      // 清空警示訊息\r\n      warningMsg.forEach(el => el.innerHTML=\"\");\r\n\r\n      // 表單驗證\r\n      let errors = validate(reserveForm, constraints);\r\n      if(errors){\r\n        Object.keys(errors).forEach(key=>{\r\n          const targetElement = document.getElementById(key);\r\n          const msg = errors[key][0].split('/')[1];\r\n          targetElement.innerHTML = msg;\r\n        });\r\n        return;\r\n      }\r\n\r\n      // 若購物車是空的，不送出訂單\r\n      if(cartData.carts.length===0) {\r\n        alert('再多逛一下，把喜歡的品項放進購物車喔！');\r\n        return;\r\n      }\r\n\r\n      // 防呆\r\n      e.target.setAttribute(\"disabled\", \"\");\r\n\r\n      // 驗證通過，送出訂單\r\n      const endpoint = `${FEbaseURL}/orders`;\r\n      axios.post(endpoint,{\r\n          \"data\": {\r\n            \"user\": {\r\n              \"name\": reserveFormInputs[0].value,\r\n              \"tel\": reserveFormInputs[1].value,\r\n              \"email\": reserveFormInputs[2].value,\r\n              \"address\": reserveFormInputs[3].value,\r\n              \"payment\": reserveFormInputs[4].value\r\n            }\r\n          }\r\n        })\r\n      .then((res)=>{\r\n          // 成功送出訂單，sweetalert 跳出成功訊息\r\n          swal({\r\n            title: \"成功！\",\r\n            text: \"已收到您的訂單，請耐心等候到貨。\",\r\n            icon: \"success\",\r\n            button: \"OK\",\r\n          });\r\n\r\n          // 清空表單資料 & 重新渲染購物車列表\r\n          reserveFormInputs.forEach(item => item.value = '');\r\n          renderCart();\r\n\r\n          // 清空警示訊息\r\n          warningMsg.forEach(el => el.innerHTML=\"\");\r\n\r\n          // 防呆解除\r\n          e.target.removeAttribute(\"disabled\");\r\n      })\r\n      .catch((err)=>{\r\n          console.log(err);\r\n      });\r\n\r\n    });\r\n}\r\n\r\n\r\n// 前台：初始渲染\r\nfunction init_FE(){\r\n  // 取得產品列表\r\n  getProducts();\r\n  // 渲染購物車列表\r\n  renderCart();\r\n  // 監聽送出訂單資料按鈕\r\n  sendOrder();\r\n  // 監聽產品篩選器：過濾產品列表\r\n  const productsCategory = document.querySelector('.productsCategory');\r\n  productsCategory.addEventListener('change',(e) => {\r\n    if(e.target.value === '全部'){\r\n      renderProducts(productsData);\r\n      return;\r\n    }\r\n    const data = productsData.filter(item => item.category === e.target.value);\r\n    renderProducts(data);\r\n  });\r\n}\r\n","// 首頁 - 好評推薦-上層\r\nconst recommendTopSwiper = new Swiper ('.recommendTopSwiper', {\r\n    slidesPerView: 2.57,\r\n    spaceBetween: 30,\r\n});\r\n\r\n// 首頁 - 好評推薦-下層\r\nconst recommendBottomSwiper = new Swiper ('.recommendBottomSwiper', {\r\n    slidesPerView: 2.8,\r\n    spaceBetween: 30,\r\n});\r\n"]}